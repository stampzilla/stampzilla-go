<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<dom-module id="nodes-list">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
		<ul>
			<template is="dom-repeat" items="{{_toArray(items)}}">
				<li>
					<a href="{{_getHref(item.Uuid)}}">
						<span class="paper-font-body1">{{item.Name}}</span>
					</a>
						<span class="paper-font-body1">{{item.Host}}</span>
				</li>
			</template>
		</ul>
	</template>

	<script>
		(function () {
			Polymer({
				is: 'nodes-list',
				properties: {
					items: {
						type: Object,
						notify: true,
					},
					message: {
						type: Object,
						notify: true,
						observer: 'newMessage'
					}
				},
				_toArray: function(obj) {
					if(!obj){
						return [];
					}
					return Object.keys(obj).map(function(key) {
						return obj[key];
					});
				},
				_getHref: function(myAttrib) {
					return '/nodes/' + myAttrib;
				},
				newMessage: function(d) {
					console.log(d);
					this.items = d.data;
				},
				ready: function() {
					this.items = [
						'Responsive Web App boilerplate',
						'Iron Elements and Paper Elements',
						'End-to-end Build Tooling (including Vulcanize)',
						'Unit testing with Web Component Tester',
						'Routing with Page.js',
						'Offline support with the Platinum Service Worker Elements'
					];
				}
			});
		})();
	</script>

</dom-module>
